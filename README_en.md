<!-- 语言选择 / Language Selection -->
**[🇨🇳 中文](README.md)** | **[🇺🇸 English](README_en.md)**

---

# VS Code Diagnostics Dumper

A VS Code extension for real-time monitoring and exporting code diagnostics information. This extension automatically exports errors, warnings, and other diagnostic data to JSON files for external tools analysis and processing.

## ✨ Features

- **Real-time Monitoring**: Automatically listens to all diagnostic changes in VS Code (errors, warnings, information, etc.)
- **Smart Debouncing**: Built-in 200ms debounce mechanism to avoid frequent file write operations
- **Flexible Configuration**: Support custom output directory, defaults to Desktop
- **Complete Information**: Export detailed diagnostic information including location, severity level, error codes, etc.
- **File Tracking**: Maintain "seen files" records, showing empty diagnostic arrays even after errors are fixed
- **Manual Export**: Provides command palette commands for manual export triggering

## 🚀 Quick Start

### Installation

1. Search for "vscode-diagnostics-dumper" in VS Code Extension Marketplace
2. Click Install and enable the extension

### Usage

The extension starts working automatically after activation:

1. **Automatic Mode**: The extension automatically listens to errors and warnings in your code, updating JSON files in real-time
2. **Manual Export**: Use `Ctrl+Shift+P` to open command palette, search for "Diagnostics Dumper: Dump Now"

## ⚙️ Configuration Options

The extension provides the following configuration options:

### `diagnosticsDumper.outputDir`

- **Type**: `string`
- **Default**: `""` (empty string, will use default path)
- **Description**: Output directory for diagnostic JSON files

**Configuration Example**:

```json
{
  "diagnosticsDumper.outputDir": "C:\\Users\\YourName\\Documents\\diagnostics"
}
```

**Default Behavior**: If not set, files will be saved to `Desktop/vscode-diagnostics-dumper/vscode-diagnostics.json`

## 📄 Output Format

The JSON file structure generated by the extension:

```json
[
  {
    "file": "absolute file path",
    "diagnostics": [
      {
        "message": "error message",
        "severity": 0,
        "level": "Error",
        "source": "TypeScript",
        "code": "2322",
        "start": { "line": 10, "character": 15 },
        "end": { "line": 10, "character": 25 }
      }
    ]
  }
]
```

### Severity Levels

- `0` / `"Error"`: Error
- `1` / `"Warning"`: Warning  
- `2` / `"Information"`: Information
- `3` / `"Hint"`: Hint

## 🛠️ Development Requirements

- VS Code version >= 1.102.0
- Node.js (for development and compilation)

## 📋 Available Commands

| Command | Description |
|---------|-------------|
| `Diagnostics Dumper: Dump Now` | Manually trigger diagnostic information export |

## 🔧 How It Works

1. **Listening Mechanism**: Uses `vscode.languages.onDidChangeDiagnostics` API to listen for diagnostic changes
2. **Data Collection**: Gets all current diagnostic information through `vscode.languages.getDiagnostics()`
3. **Smart Caching**: Maintains "seen files" set to ensure files appear in output even after errors are fixed
4. **Debounce Processing**: 200ms delayed write to avoid frequent IO operations
5. **Configuration Listening**: Automatically responds to user configuration changes, applying new output paths immediately

## 📦 Technical Implementation

- **Language**: TypeScript
- **Core API**: VS Code Extension API
- **Main Modules**:
  - `vscode.languages` - Diagnostic information retrieval
  - `vscode.workspace` - Configuration management
  - `vscode.commands` - Command registration
  - Node.js `fs` - File system operations

## 🐛 Known Issues

No major known issues at the moment. If you encounter problems, please submit an issue in the project repository.

## 📝 Changelog

### 0.0.1 (Current Version)

- ✅ Basic diagnostic information export functionality
- ✅ Custom output directory support
- ✅ Real-time listening and debounce mechanism
- ✅ Manual export command
- ✅ Complete diagnostic information structure

## 🤝 Contributing

Pull Requests and Issues are welcome!

## 📄 License

This project uses the standard VS Code extension license.

---

**Happy Coding!** 🎉